@model RT.Models.Order
@{
    Layout = null;
    string TotalAmount = Model.TotalAmount.HasValue ? Model.TotalAmount.Value.ToString("#,##0.00#") : "";
    bool anyDinining = Model.OrderedProducts.Where(i => i.Status == 1).Any(i => i.Type == 0);
}
@using (Html.BeginForm("Pay", "Bill", FormMethod.Post))
{
    <div id="divOrderDetails">
        
        <table class="invoice-form-table">
            <tbody>
                <tr>
                    <td>
                        <div style="min-height: 275px; position: inherit;">

                            <table id="dataTable">
                                <tbody id="tBodyOrders">

                                    <tr>
                                        <th>
                                            @if(anyDinining){
                                                @:<input type="checkbox" name="allbox" class="csChkAll" style="margin: 0 0 0 4px" onclick="checkAll();">
                                            }
                                            else{
                                                @:<input type="checkbox" name="allbox" class="csChkAll" style="margin: 0 0 0 4px" onclick="checkAll();" checked="checked">
                                            }
                                        </th>
                                        <th>Name</th>
                                        <th>Unit</th>
                                        <th>Qty</th>
                                        <th>Total</th>
                                        <th>
                                            <img class="button-icon" src="./images/delete.png" onclick="productRemoveAll();">
                                        </th>
                                    </tr>

                                    @if (Model.OrderedProducts.Count > 0)
                                    {
                                        int? inx = 0;
                                        foreach (var item in Model.OrderedProducts)
                                        {
                                            //Todo: if it is a parcel row then change this TR class to parcellrow else nonparcelrow
                                            inx++;
                                            ViewData["count"] = inx;
                                            @Html.Partial("OrderedProduct", item);
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>

                    </td>
                </tr>

                <tr>
                    <td>
                        <div id="invoice-payment-form">
                            @if (Model != null)
                            {
                                        
                                @Html.HiddenFor(model => Model.Id);
                                @Html.TextBoxFor(model => Model.Seats, new { @readonly = "true", @placeholder = "Seats" });
                                <br />
                                @Html.TextBoxFor(mode => TotalAmount, new { @readonly = "true", @placeholder = "Total" });
                                <input type="text" placeholder="PAY AMOUNT" onclick="setBalanceAmount()" onkeypress="enterPlaceBill(event)" onkeyup="setBalanceAmount()" onkeydown="setBalanceAmountValue()" value="" id="PaidAmount" disabled="disabled" name="PaidAmount" />
                                        
                                <input type="text" value="" placeholder="BALANCE" id="BalanceAmount" name="BalanceAmount" readonly="true"/>
                                        
                            }
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>


            @Html.Hidden("saveOrderUrl", Url.Action("SaveOrder"))
            <input type="button" value="Order" id="saveOrder" class="btn btn-disabled">
           
        
        @Html.Hidden("savePayUrl", Url.Action("Pay"))
       <input type="button" value="Pay" id="savePayment" class="btn btn-disabled">
    </div>
}